<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
<div id="loginContainer" class="login-container">
        <div class="login-box">
            <h2 class="login-title">üîí –î–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É</h2>
            <input type="text" id="username" class="login-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" autocomplete="username">
            <input type="password" id="password" class="login-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="current-password">
            <button id="loginBtn" class="login-btn" onclick="checkPassword()">–í–æ–π—Ç–∏</button>
            <p id="errorMessage" class="error-message">–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å</p>
        </div>
    </div>

    <!-- –í–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div id="siteContent" class="hidden">
        <!-- ‚ö†Ô∏è –ü–ï–†–ï–ù–ï–°–ò–¢–ï –°–Æ–î–ê –í–ï–°–¨ –í–ê–® –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô HTML-–ö–û–î -->
        
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π —Å–∞–π—Ç! üéâ</h1>
        <p>–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É.</p>
        
        <!-- –í–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
        
    </div>


    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è
        async function checkPassword() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('loginBtn');
            const errorMessage = document.getElementById('errorMessage');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            loginBtn.disabled = true;
            loginBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';
            errorMessage.style.display = 'none';
            
            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
                const response = await fetch('/.netlify/functions/auth', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: username,
                        password: password
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∞–π—Ç
                    document.getElementById('loginContainer').style.display = 'none';
                    document.getElementById('siteContent').classList.remove('hidden');
                } else {
                    // –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞
                    errorMessage.style.display = 'block';
                    loginBtn.textContent = '–í–æ–π—Ç–∏';
                    loginBtn.disabled = false;
                }
                
            } catch (error) {
                // –û—à–∏–±–∫–∞ —Å–µ—Ç–∏
                errorMessage.textContent = '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º';
                errorMessage.style.display = 'block';
                loginBtn.textContent = '–í–æ–π—Ç–∏';
                loginBtn.disabled = false;
            }
        }
        
        // –í—Ö–æ–¥ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Enter
        document.getElementById('password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });
        
        // –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –ª–æ–≥–∏–Ω–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.getElementById('username').focus();
    </script>


</body>
</html>